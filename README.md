# Google Fonts Proxy

üöÄ **–í—ã—Å–æ–∫–æ–ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω—ã–π –ø—Ä–æ–∫—Å–∏-—Å–∫—Ä–∏–ø—Ç –¥–ª—è Google Fonts —Å –ª–æ–∫–∞–ª—å–Ω—ã–º –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ–º**

–û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ PHP-—Ä–µ—à–µ–Ω–∏–µ –¥–ª—è –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è Google Fonts –Ω–∞ –≤–∞—à–µ–º —Å–µ—Ä–≤–µ—Ä–µ —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –∑–∞–º–µ–Ω–æ–π –ø—É—Ç–µ–π –≤ CSS —Ñ–∞–π–ª–∞—Ö. –ò–¥–µ–∞–ª—å–Ω–æ –ø–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è –ø–æ–≤—ã—à–µ–Ω–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ —Å–∞–π—Ç–∞ –∏ —Å–æ–±–ª—é–¥–µ–Ω–∏—è —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–π –ø—Ä–∏–≤–∞—Ç–Ω–æ—Å—Ç–∏.

## ‚ú® –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

- **‚ö° –í—ã—Å–æ–∫–∞—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å** - –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω –¥–ª—è –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏ –æ—Ç–∫–ª–∏–∫–∞
- **üß† –ò–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω–æ–µ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ** - CSS –∏ —à—Ä–∏—Ñ—Ç—ã –∫—ç—à–∏—Ä—É—é—Ç—Å—è –ª–æ–∫–∞–ª—å–Ω–æ –Ω–∞ 1 –≥–æ–¥
- **üîí –ü–æ–ª–Ω–∞—è –ø—Ä–∏–≤–∞—Ç–Ω–æ—Å—Ç—å** - –Ω–∏–∫–∞–∫–∏—Ö –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ Google —Å –∫–ª–∏–µ–Ω—Ç—Å–∫–æ–π —Å—Ç–æ—Ä–æ–Ω—ã
- **üåê CORS –ø–æ–¥–¥–µ—Ä–∂–∫–∞** - —Ä–∞–±–æ—Ç–∞–µ—Ç —Å –ª—é–±—ã–º–∏ –¥–æ–º–µ–Ω–∞–º–∏
- **üì± –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ñ–æ—Ä–º–∞—Ç–∞** - WOFF2 –¥–ª—è —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –±—Ä–∞—É–∑–µ—Ä–æ–≤, WOFF –¥–ª—è —Å—Ç–∞—Ä—ã—Ö
- **üõ°Ô∏è –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å** - –≤–∞–ª–∏–¥–∞—Ü–∏—è –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –∏ –∑–∞—â–∏—Ç–∞ –æ—Ç –∏–Ω—ä–µ–∫—Ü–∏–π
- **üíæ –ö—ç—à –≤ –ø–∞–º—è—Ç–∏** - –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç –ø–æ–≤—Ç–æ—Ä–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –≤ —Ä–∞–º–∫–∞—Ö –æ–¥–Ω–æ–≥–æ –∑–∞–ø—Ä–æ—Å–∞
- **‚öôÔ∏è –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–∏–≤–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã** - –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∫—ç—à–µ–º
- **üîç –†–∞—Å—à–∏—Ä–µ–Ω–Ω–∞—è –æ—Ç–ª–∞–¥–∫–∞** - –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
- **üéØ –ù–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è User-Agent** - —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ–µ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è —Ä–∞–∑–Ω—ã—Ö –±—Ä–∞—É–∑–µ—Ä–æ–≤
- **üìä –î–µ—Ç–∞–ª—å–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞** - –ø–æ–ª–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Å–æ—Å—Ç–æ—è–Ω–∏–∏ –∫—ç—à–∞


## üöÄ –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –¥–ª—è Google PageSpeed Insights –∏ Lighthouse

### **1. –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –≤–Ω–µ—à–Ω–∏—Ö –∑–∞–ø—Ä–æ—Å–æ–≤**
- **–ü—Ä–æ–±–ª–µ–º–∞**: –ó–∞–≥—Ä—É–∑–∫–∞ —à—Ä–∏—Ñ—Ç–æ–≤ —Å fonts.googleapis.com —Å–æ–∑–¥–∞–µ—Ç –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ DNS-–∑–∞–ø—Ä–æ—Å—ã –∏ –∑–∞–¥–µ—Ä–∂–∫–∏
- **–†–µ—à–µ–Ω–∏–µ**: –í—Å–µ —à—Ä–∏—Ñ—Ç—ã –∫—ç—à–∏—Ä—É—é—Ç—Å—è –ª–æ–∫–∞–ª—å–Ω–æ –∏ –æ—Ç–¥–∞—é—Ç—Å—è —Å –≤–∞—à–µ–≥–æ –¥–æ–º–µ–Ω–∞
- **–≠—Ñ—Ñ–µ–∫—Ç**: –ó–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ–µ —É–ª—É—á—à–µ–Ω–∏–µ –º–µ—Ç—Ä–∏–∫ LCP (Largest Contentful Paint) –∏ FCP (First Contentful Paint)

### **2. –ê–≥—Ä–µ—Å—Å–∏–≤–Ω–æ–µ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ**
- CSS –∏ —à—Ä–∏—Ñ—Ç—ã –∫—ç—à–∏—Ä—É—é—Ç—Å—è –Ω–∞ –≥–æ–¥
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ ETag –¥–ª—è —É—Å–ª–æ–≤–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤ (304 Not Modified)
- –ë—Ä–∞—É–∑–µ—Ä–Ω—ã–π –∫—ç—à —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º–∏ –∑–∞–≥–æ–ª–æ–≤–∫–∞–º–∏

### **3. –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø–æ–¥ —Ä–∞–∑–Ω—ã–µ –±—Ä–∞—É–∑–µ—Ä—ã**
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø–æ–¥–¥–µ—Ä–∂–∫–∏ WOFF2 vs WOFF
- –ù–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è User-Agent –¥–ª—è —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ–≥–æ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –∫–∞–∫ —Å—Ç–∞—Ä—ã—Ö, —Ç–∞–∫ –∏ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –±—Ä–∞—É–∑–µ—Ä–æ–≤

### **4. –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞**
- –®—Ä–∏—Ñ—Ç—ã –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ
- Fallback –Ω–∞ —Å–∏—Å—Ç–µ–º–Ω—ã–µ —à—Ä–∏—Ñ—Ç—ã –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö
- –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –≤–Ω–µ—à–Ω–∏—Ö CDN

## üìä –ö–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è Google PageSpeed Insights –∏ Lighthouse

### **Core Web Vitals**
- **LCP**: –ë—ã—Å—Ç—Ä–µ–µ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è —Ç–µ–∫—Å—Ç–æ–≤—ã–µ –±–ª–æ–∫–∏
- **CLS**: –°—Ç–∞–±–∏–ª—å–Ω—ã–µ —Ä–∞–∑–º–µ—Ä—ã —à—Ä–∏—Ñ—Ç–æ–≤ –±–µ–∑ —Å–∫–∞—á–∫–æ–≤
- **FID**: –ù–µ—Ç –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ –æ—Å–Ω–æ–≤–Ω–æ–≥–æ –ø–æ—Ç–æ–∫–∞

### **–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –º–µ—Ç—Ä–∏–∫–∏**
- –£–º–µ–Ω—å—à–µ–Ω–∏–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ HTTP-–∑–∞–ø—Ä–æ—Å–æ–≤
- –ò—Å–∫–ª—é—á–µ–Ω–∏–µ —Ä–µ–¥–∏—Ä–µ–∫—Ç–æ–≤ —á–µ—Ä–µ–∑ Google CDN

## üéØ –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã

**–î–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –ø—Ä–æ–∫—Å–∏:**
- –ó–∞–ø—Ä–æ—Å—ã –∫ fonts.googleapis.com –∏ fonts.gstatic.com
- DNS-—Ä–µ–∑–æ–ª–≤–∏–Ω–≥ –≤–Ω–µ—à–Ω–∏—Ö –¥–æ–º–µ–Ω–æ–≤
- –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç—å –æ—Ç —Å–∫–æ—Ä–æ—Å—Ç–∏ Google CDN

**–ü–æ—Å–ª–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –ø—Ä–æ–∫—Å–∏:**
- –í—Å–µ —Ä–µ—Å—É—Ä—Å—ã —Å –æ–¥–Ω–æ–≥–æ –¥–æ–º–µ–Ω–∞
- –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ
- –ü–æ–ª–Ω—ã–π –∫–æ–Ω—Ç—Ä–æ–ª—å –Ω–∞–¥ –¥–æ—Å—Ç–∞–≤–∫–æ–π —à—Ä–∏—Ñ—Ç–æ–≤

## üìà –û–∂–∏–¥–∞–µ–º—ã–µ —É–ª—É—á—à–µ–Ω–∏—è PageSpeed

- **Desktop**: +1-5 –±–∞–ª–ª–æ–≤ (–≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —à—Ä–∏—Ñ—Ç–æ–≤)
- **Mobile**: +1-3 –±–∞–ª–ª–æ–≤ (–º–æ–±–∏–ª—å–Ω—ã–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è –±–æ–ª–µ–µ —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã –∫ –≤–Ω–µ—à–Ω–∏–º –∑–∞–ø—Ä–æ—Å–∞–º)
- **–í—Ä–µ–º—è –∑–∞–≥—Ä—É–∑–∫–∏**: –°–æ–∫—Ä–∞—â–µ–Ω–∏–µ –Ω–∞ 80‚Äì120‚ÄØms –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –≥–µ–æ–≥—Ä–∞—Ñ–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

–≠—Ç–æ—Ç –ø—Ä–æ–∫—Å–∏ –æ—Å–æ–±–µ–Ω–Ω–æ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–µ–Ω –¥–ª—è —Å–∞–π—Ç–æ–≤, –∏—Å–ø–æ–ª—å–∑—É—é—â–∏—Ö –Ω–µ—Å–∫–æ–ª—å–∫–æ Google Fonts, —Ç–∞–∫ –∫–∞–∫ –ø–æ–ª–Ω–æ—Å—Ç—å—é —É—Å—Ç—Ä–∞–Ω—è–µ—Ç –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å –æ—Ç –≤–Ω–µ—à–Ω–∏—Ö CDN –∏ –æ–ø—Ç–∏–º–∏–∑–∏—Ä—É–µ—Ç –¥–æ—Å—Ç–∞–≤–∫—É —à—Ä–∏—Ñ—Ç–æ–≤ –ø–æ–¥ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ –±—Ä–∞—É–∑–µ—Ä—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π.

---

## üìã –û–±–∑–æ—Ä –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

Google Fonts Proxy –æ–ø—Ç–∏–º–∏–∑–∏—Ä—É–µ—Ç **–≤–µ—Å—å —Ü–∏–∫–ª –∑–∞–≥—Ä—É–∑–∫–∏ —à—Ä–∏—Ñ—Ç–æ–≤**, –≤–∫–ª—é—á–∞—è:

1. **DNS Resolution** (DNS-—Ä–µ–∑–æ–ª–≤–∏–Ω–≥)
2. **TCP Connection** (TCP-—Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ) 
3. **SSL/TLS Handshake** (SSL-—Ä—É–∫–æ–ø–æ–∂–∞—Ç–∏–µ)
4. **HTTP Request/Response** (HTTP-–∑–∞–ø—Ä–æ—Å—ã)
5. **Content Delivery** (–¥–æ—Å—Ç–∞–≤–∫–∞ –∫–æ–Ω—Ç–µ–Ω—Ç–∞)
6. **Browser Caching** (–∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –±—Ä–∞—É–∑–µ—Ä–∞)
7. **Parallel Processing** (–ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞)

---

## üåê 1. DNS Resolution (DNS-—Ä–µ–∑–æ–ª–≤–∏–Ω–≥)

### **–ü—Ä–æ–±–ª–µ–º–∞ –±–µ–∑ –ø—Ä–æ–∫—Å–∏:**
```html
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700&display=swap" rel="stylesheet">
```

**DNS-–∑–∞–ø—Ä–æ—Å—ã:**
1. `fonts.googleapis.com` ‚Üí –ø–æ–ª—É—á–µ–Ω–∏–µ CSS
2. `fonts.gstatic.com` ‚Üí –∑–∞–≥—Ä—É–∑–∫–∞ —Ñ–∞–π–ª–æ–≤ —à—Ä–∏—Ñ—Ç–æ–≤
3. –í–æ–∑–º–æ–∂–Ω—ã–µ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –ø–æ–¥–¥–æ–º–µ–Ω—ã

### **–í—Ä–µ–º—è DNS-—Ä–µ–∑–æ–ª–≤–∏–Ω–≥–∞ –ø–æ —Ä–µ–≥–∏–æ–Ω–∞–º:**
- **–ï–≤—Ä–æ–ø–∞/–°–®–ê**: 40‚Äì80 ms
- **–ê–∑–∏—è**: 60‚Äì120 ms  
- **–ê—Ñ—Ä–∏–∫–∞/–õ–∞—Ç–∏–Ω—Å–∫–∞—è –ê–º–µ—Ä–∏–∫–∞**: 80‚Äì200 ms
- **–ú–æ–±–∏–ª—å–Ω—ã–µ —Å–µ—Ç–∏ 3G**: 200‚Äì500 ms
- **–ú–æ–±–∏–ª—å–Ω—ã–µ —Å–µ—Ç–∏ 4G/5G**: 30‚Äì100 ms

### **–†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–∫—Å–∏:**
```html
<link href="/fonts-proxy.php?family=Inter:wght@400;700&display=swap" rel="stylesheet">
```
- ‚úÖ **0 –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö DNS-–∑–∞–ø—Ä–æ—Å–æ–≤** (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–æ–º–µ–Ω —Å–∞–π—Ç–∞)
- ‚úÖ **–≠–∫–æ–Ω–æ–º–∏—è 40‚Äì500 ms** –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Ä–µ–≥–∏–æ–Ω–∞

---

## üîå 2. TCP Connection (TCP-—Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ)

### **–ü—Ä–æ–±–ª–µ–º–∞ –±–µ–∑ –ø—Ä–æ–∫—Å–∏:**
```
fonts.googleapis.com:443
‚îú‚îÄ‚îÄ TCP SYN
‚îú‚îÄ‚îÄ TCP SYN-ACK  
‚îú‚îÄ‚îÄ TCP ACK
‚îî‚îÄ‚îÄ Connection established (~20-100 ms)

fonts.gstatic.com:443
‚îú‚îÄ‚îÄ TCP SYN
‚îú‚îÄ‚îÄ TCP SYN-ACK
‚îú‚îÄ‚îÄ TCP ACK  
‚îî‚îÄ‚îÄ Connection established (~20-100 ms)
```

**–í—Ä–µ–º—è —É—Å—Ç–∞–Ω–æ–≤–∫–∏ TCP-—Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è:**
- **–õ–æ–∫–∞–ª—å–Ω–∞—è —Å–µ—Ç—å**: 1‚Äì5 ms
- **–í –ø—Ä–µ–¥–µ–ª–∞—Ö —Å—Ç—Ä–∞–Ω—ã**: 10‚Äì30 ms
- **–ú–µ–∂–¥—É–Ω–∞—Ä–æ–¥–Ω–æ–µ**: 50‚Äì150 ms
- **–°–ø—É—Ç–Ω–∏–∫–æ–≤–æ–µ**: 500‚Äì800 ms

### **–†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–∫—Å–∏:**
- ‚úÖ **–ü–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è** —Å –¥–æ–º–µ–Ω–æ–º —Å–∞–π—Ç–∞
- ‚úÖ **–≠–∫–æ–Ω–æ–º–∏—è 20‚Äì300 ms** –Ω–∞ —É—Å—Ç–∞–Ω–æ–≤–∫—É –Ω–æ–≤—ã—Ö —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π
- ‚úÖ **HTTP/2 multiplexing** –Ω–∞ –æ–¥–Ω–æ–º —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–∏

---

## üîê 3. SSL/TLS Handshake (SSL-—Ä—É–∫–æ–ø–æ–∂–∞—Ç–∏–µ)

### **–ü—Ä–æ–±–ª–µ–º–∞ –±–µ–∑ –ø—Ä–æ–∫—Å–∏:**
```
SSL Handshake –¥–ª—è fonts.googleapis.com:
‚îú‚îÄ‚îÄ Client Hello
‚îú‚îÄ‚îÄ Server Hello + Certificate
‚îú‚îÄ‚îÄ Key Exchange
‚îú‚îÄ‚îÄ Change Cipher Spec
‚îî‚îÄ‚îÄ Finished (~50-200 ms)

SSL Handshake –¥–ª—è fonts.gstatic.com:
‚îú‚îÄ‚îÄ Client Hello  
‚îú‚îÄ‚îÄ Server Hello + Certificate
‚îú‚îÄ‚îÄ Key Exchange
‚îú‚îÄ‚îÄ Change Cipher Spec
‚îî‚îÄ‚îÄ Finished (~50-200 ms)
```

**–í—Ä–µ–º—è SSL-—Ä—É–∫–æ–ø–æ–∂–∞—Ç–∏—è:**
- **–°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–µ —Å–µ—Ä–≤–µ—Ä–∞ (TLS 1.3)**: 30‚Äì80 ms
- **–°—Ç–∞—Ä—ã–µ —Å–µ—Ä–≤–µ—Ä–∞ (TLS 1.2)**: 80‚Äì200 ms
- **–ú–µ–¥–ª–µ–Ω–Ω—ã–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è**: 200‚Äì500 ms


### **–†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–∫—Å–∏:**
- ‚úÖ **–ü–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ SSL-—Å–µ—Å—Å–∏–∏** –¥–æ–º–µ–Ω–∞ —Å–∞–π—Ç–∞
- ‚úÖ **–≠–∫–æ–Ω–æ–º–∏—è 50‚Äì400 ms** –Ω–∞ SSL-—Ä—É–∫–æ–ø–æ–∂–∞—Ç–∏—è
- ‚úÖ **TLS Session Resumption** –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏

---

## üì® 4. HTTP Request/Response (HTTP-–∑–∞–ø—Ä–æ—Å—ã)

### **–ü—Ä–æ–±–ª–µ–º–∞ –±–µ–∑ –ø—Ä–æ–∫—Å–∏:**

**–ü–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∑–∞–ø—Ä–æ—Å–æ–≤:**
```
1. GET fonts.googleapis.com/css2?family=Inter    [‚ñà‚ñà‚ñà‚ñà] 60-150 ms
   ‚Üì –ü–∞—Ä—Å–∏–Ω–≥ CSS
2. GET fonts.gstatic.com/font1.woff2             [‚ñà‚ñà‚ñà‚ñà] 40-120 ms  
3. GET fonts.gstatic.com/font2.woff2             [‚ñà‚ñà‚ñà‚ñà] 40-120 ms
4. GET fonts.gstatic.com/font3.woff2             [‚ñà‚ñà‚ñà‚ñà] 40-120 ms
```

**–ó–∞–¥–µ—Ä–∂–∫–∏ HTTP:**
- **Time to First Byte (TTFB)**: 50‚Äì200 ms
- **Content Download**: –∑–∞–≤–∏—Å–∏—Ç –æ—Ç —Ä–∞–∑–º–µ—Ä–∞ —Ñ–∞–π–ª–∞
- **Queue Time**: –æ—á–µ—Ä–µ–¥—å –∑–∞–ø—Ä–æ—Å–æ–≤ –≤ –±—Ä–∞—É–∑–µ—Ä–µ



### **–†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–∫—Å–∏:**
- ‚úÖ **–ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞** –Ω–µ—Å–∫–æ–ª—å–∫–æ —à—Ä–∏—Ñ—Ç–æ–≤ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ
- ‚úÖ **–£–º–µ–Ω—å—à–µ–Ω–∏–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –∑–∞–ø—Ä–æ—Å–æ–≤** (CSS + —à—Ä–∏—Ñ—Ç—ã –∑–∞ –æ–¥–∏–Ω –∑–∞–ø—Ä–æ—Å)
- ‚úÖ **–≠–∫–æ–Ω–æ–º–∏—è 100‚Äì500 ms** –Ω–∞ HTTP Round-Trip Time

---

## üöö 5. Content Delivery (–¥–æ—Å—Ç–∞–≤–∫–∞ –∫–æ–Ω—Ç–µ–Ω—Ç–∞)

### **–ü—Ä–æ–±–ª–µ–º–∞ –±–µ–∑ –ø—Ä–æ–∫—Å–∏:**

**–ì–µ–æ–≥—Ä–∞—Ñ–∏—á–µ—Å–∫–æ–µ —Ä–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ —Å–µ—Ä–≤–µ—Ä–æ–≤ Google:**
- CDN-—É–∑–ª—ã –Ω–µ –≤—Å–µ–≥–¥–∞ –æ–ø—Ç–∏–º–∞–ª—å–Ω—ã –¥–ª—è –≤—Å–µ—Ö —Ä–µ–≥–∏–æ–Ω–æ–≤
- –†–æ—É—Ç–∏–Ω–≥ –º–æ–∂–µ—Ç –±—ã—Ç—å –Ω–µ—ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω—ã–º
- –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –ø—Ä–æ–ø—É—Å–∫–Ω–æ–π —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏

### **–†–∞–∑–º–µ—Ä—ã —Ñ–∞–π–ª–æ–≤ Google Fonts:**
```
–¢–∏–ø–∏—á–Ω—ã–π –≤–µ–±-—à—Ä–∏—Ñ—Ç:
‚îú‚îÄ‚îÄ WOFF2: 15-50 KB
‚îú‚îÄ‚îÄ WOFF: 20-70 KB  
‚îú‚îÄ‚îÄ TTF: 50-200 KB
‚îî‚îÄ‚îÄ Variable fonts: 30-100 KB
```

### **–†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–∫—Å–∏:**
- ‚úÖ **–õ–æ–∫–∞–ª—å–Ω–æ–µ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ** –Ω–∞ –≤–∞—à–µ–º —Å–µ—Ä–≤–µ—Ä–µ
- ‚úÖ **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –≤—ã–±–æ—Ä —Ñ–æ—Ä–º–∞—Ç–∞** (WOFF2 –¥–ª—è —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –±—Ä–∞—É–∑–µ—Ä–æ–≤)
- ‚úÖ **–°–∂–∞—Ç–∏–µ —Ñ–∞–π–ª–æ–≤** –ø–æ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—é
- ‚úÖ **–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ —Ä–∞–∑–º–µ—Ä–∞** —Ñ–∞–π–ª–æ–≤ –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏


---

## üíæ 6. Browser Caching (–∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –±—Ä–∞—É–∑–µ—Ä–∞)

### **–ü—Ä–æ–±–ª–µ–º–∞ –±–µ–∑ –ø—Ä–æ–∫—Å–∏:**

**–ó–∞–≥–æ–ª–æ–≤–∫–∏ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è Google Fonts:**
```http
Cache-Control: public, max-age=86400  (24 —á–∞—Å–∞ –¥–ª—è CSS)
Cache-Control: public, max-age=31536000  (1 –≥–æ–¥ –¥–ª—è —à—Ä–∏—Ñ—Ç–æ–≤)
```

**–ü—Ä–æ–±–ª–µ–º—ã:**
- CSS –∫—ç—à–∏—Ä—É–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –Ω–∞ 24 —á–∞—Å–∞
- –ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ Google Fonts –º–æ–≥—É—Ç –ª–æ–º–∞—Ç—å –∫—ç—à
- –ù–µ—Ç –∫–æ–Ω—Ç—Ä–æ–ª—è –Ω–∞–¥ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ–º

### **–†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–∫—Å–∏:**
- ‚úÖ **–î–ª–∏—Ç–µ–ª—å–Ω–æ–µ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ** (–¥–æ 1 –≥–æ–¥–∞)
- ‚úÖ **ETag –ø–æ–¥–¥–µ—Ä–∂–∫–∞** –¥–ª—è —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
- ‚úÖ **304 Not Modified** –æ—Ç–≤–µ—Ç—ã
- ‚úÖ **Vary –∑–∞–≥–æ–ª–æ–≤–∫–∏** –¥–ª—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è

---

## ‚ö° 7. Parallel Processing (–ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞)

**–ü—Ä–æ–±–ª–µ–º–∞ –±–µ–∑ –ø—Ä–æ–∫—Å–∏:**

* –ü—Ä–∏ ¬´—Ä–∞–∑–≥–æ–Ω–µ¬ª –Ω–æ–≤—ã—Ö —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π TCP —Å—Ç–∞–ª–∫–∏–≤–∞–µ—Ç—Å—è —Å **–ø—Ä–æ–±–ª–µ–º–æ–π –ø–ª–∞–≤–∞—é—â–µ–≥–æ –æ–∫–Ω–∞** (slow start): –∫–∞–∂–¥—ã–π –Ω–æ–≤—ã–π –ø–æ—Ç–æ–∫ —Å–Ω–∞—á–∞–ª–∞ –ø–µ—Ä–µ–¥–∞—ë—Ç –º–∞–ª–æ –¥–∞–Ω–Ω—ã—Ö, –ø–æ—Å—Ç–µ–ø–µ–Ω–Ω–æ —É–≤–µ–ª–∏—á–∏–≤–∞—è —Å–∫–æ—Ä–æ—Å—Ç—å, —á—Ç–æ –¥–æ–±–∞–≤–ª—è–µ—Ç RTT-–∑–∞–¥–µ—Ä–∂–∫–∏.

**–†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–∫—Å–∏:**

* –í—Å–µ –∑–∞–ø—Ä–æ—Å—ã –∫ CSS –∏ —à—Ä–∏—Ñ—Ç–∞–º –∏–¥—É—Ç –Ω–∞ –¥–æ–º–µ–Ω —Å–∞–π—Ç–∞ ‚Äî –æ–¥–∏–Ω TCP/TLS-—Å–µ–∞–Ω—Å.
* –ù–µ—Ç overhead –Ω–∞ —É—Å—Ç–∞–Ω–æ–≤–∫—É –Ω–æ–≤—ã—Ö —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π –∏ –º–µ–¥–ª–µ–Ω–Ω—ã–π —Å—Ç–∞—Ä—Ç –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —à—Ä–∏—Ñ—Ç–∞.

### –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ HTTP/2

* **–ú—É–ª—å—Ç–∏–ø–ª–µ–∫—Å–∏—Ä–æ–≤–∞–Ω–∏–µ**: –¥–µ—Å—è—Ç–∫–∏ –∑–∞–ø—Ä–æ—Å–æ–≤/–æ—Ç–≤–µ—Ç–æ–≤ –≤ –æ–¥–Ω–æ–º TCP‚Äë–ø–æ—Ç–æ–∫–µ –±–µ–∑ —Å–æ–∑–¥–∞–Ω–∏—è –Ω–æ–≤—ã—Ö —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π.
* **–°–∂–∞—Ç–∏–µ –∑–∞–≥–æ–ª–æ–≤–∫–æ–≤ (HPACK)**: —Å–Ω–∏–∂–∞–µ—Ç –æ–±—ä—ë–º —Å–ª—É–∂–µ–±–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö.

### –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ HTTP/3 (QUIC)

* **UDP‚Äë–æ—Å–Ω–æ–≤–∞ –∏ 0‚ÄëRTT**: –±—ã—Å—Ç—Ä–æ–µ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –∏ —É—Å—Ç–∞–Ω–æ–≤–∫–∞ —Å–µ—Å—Å–∏–∏.
* **–û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ Head‚Äëof‚ÄëLine blocking**: –ø—Ä–æ–±–ª–µ–º—ã –≤ –æ–¥–Ω–æ–º –ø–æ—Ç–æ–∫–µ –Ω–µ –≤–ª–∏—è—é—Ç –Ω–∞ –¥—Ä—É–≥–∏–µ.
* **–ú–µ–Ω—å—à–µ RTT –ø—Ä–∏ –ø–æ—Ç–µ—Ä–µ –ø–∞–∫–µ—Ç–æ–≤**: –±–æ–ª–µ–µ —É—Å—Ç–æ–π—á–∏–≤–∞—è –∏ –Ω–∏–∑–∫–æ–ª–∞—Ç–µ–Ω—Ç–Ω–∞—è –ø–µ—Ä–µ–¥–∞—á–∞.

---

## üìä –°–≤–æ–¥–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞ —É–ª—É—á—à–µ–Ω–∏–π –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

| **–ö–æ–º–ø–æ–Ω–µ–Ω—Ç** | **–ë–µ–∑ –ø—Ä–æ–∫—Å–∏** | **–° –ø—Ä–æ–∫—Å–∏** | **–≠–∫–æ–Ω–æ–º–∏—è** |
|---------------|----------------|--------------|-------------|
| **DNS Resolution** | 40‚Äì500 ms | 0 ms | 40‚Äì500 ms |
| **TCP Connection** | 20‚Äì300 ms | 0 ms | 20‚Äì300 ms |
| **SSL Handshake** | 50‚Äì400 ms | 0 ms | 50‚Äì400 ms |
| **HTTP Requests** | 100‚Äì500 ms | 80‚Äì200 ms | 20‚Äì300 ms |
| **Content Delivery** | –ó–∞–≤–∏—Å–∏—Ç –æ—Ç CDN | –õ–æ–∫–∞–ª—å–Ω–æ | 50‚Äì200 ms |
| **Browser Caching** | 24 —á–∞—Å–∞ CSS | 1 –≥–æ–¥ | –î–æ–ª–≥–æ—Å—Ä–æ—á–Ω–æ |


### **üéØ –û–±—â–∞—è —ç–∫–æ–Ω–æ–º–∏—è –≤—Ä–µ–º–µ–Ω–∏:**
- **–ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è**: 180‚Äì600 ms
- **–¢–∏–ø–∏—á–Ω–∞—è**: 380‚Äì1200 ms  
- **–ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è**: 600‚Äì2500 ms

### **üì± –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ –¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤:**
- **3G —Å–µ—Ç–∏**: —ç–∫–æ–Ω–æ–º–∏—è –¥–æ 2000‚Äì3000 ms
- **4G —Å–µ—Ç–∏**: —ç–∫–æ–Ω–æ–º–∏—è –¥–æ 800‚Äì1500 ms
- **5G —Å–µ—Ç–∏**: —ç–∫–æ–Ω–æ–º–∏—è –¥–æ 300‚Äì800 ms

### **üåç –†–µ–≥–∏–æ–Ω–∞–ª—å–Ω—ã–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
- **–ë–ª–∏–∑–∫–∏–µ —Ä–µ–≥–∏–æ–Ω—ã**: —ç–∫–æ–Ω–æ–º–∏—è 180‚Äì600 ms
- **–£–¥–∞–ª–µ–Ω–Ω—ã–µ —Ä–µ–≥–∏–æ–Ω—ã**: —ç–∫–æ–Ω–æ–º–∏—è 600‚Äì1500 ms
- **–†–∞–∑–≤–∏–≤–∞—é—â–∏–µ—Å—è —Å—Ç—Ä–∞–Ω—ã**: —ç–∫–æ–Ω–æ–º–∏—è 800‚Äì2500 ms


## üìà –ú–µ—Ç—Ä–∏–∫–∏ –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞

### **Core Web Vitals —É–ª—É—á—à–µ–Ω–∏—è:**
- **First Contentful Paint (FCP)**: -100 to -500 ms
- **Largest Contentful Paint (LCP)**: -200 to -800 ms  
- **Cumulative Layout Shift (CLS)**: —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å
- **First Input Delay (FID)**: –Ω–µ–ø—Ä—è–º–æ–µ —É–ª—É—á—à–µ–Ω–∏–µ

### **Lighthouse Score —É–ª—É—á—à–µ–Ω–∏—è:**
- **Performance**: +5 to +15 points
- **Best Practices**: +2 to +8 points
- **SEO**: —Å—Ç–∞–±–∏–ª—å–Ω–æ –≤—ã—Å–æ–∫–∏–π

**–ò—Ç–æ–≥**: Google Fonts Proxy –æ–ø—Ç–∏–º–∏–∑–∏—Ä—É–µ—Ç –≤–µ—Å—å —Ü–∏–∫–ª –∑–∞–≥—Ä—É–∑–∫–∏ —à—Ä–∏—Ñ—Ç–æ–≤, –æ–±–µ—Å–ø–µ—á–∏–≤–∞—è —Å—É—â–µ—Å—Ç–≤–µ–Ω–Ω–æ–µ —É—Å–∫–æ—Ä–µ–Ω–∏–µ –∑–∞–≥—Ä—É–∑–∫–∏ —Å—Ç—Ä–∞–Ω–∏—Ü –∑–∞ —Å—á–µ—Ç —É—Å—Ç—Ä–∞–Ω–µ–Ω–∏—è –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö —Å–µ—Ç–µ–≤—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤, –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è –∏ –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Ä–µ—Å—É—Ä—Å–æ–≤.

---

## üìã –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

- PHP 7.4 –∏–ª–∏ –≤—ã—à–µ
- –†–∞—Å—à–∏—Ä–µ–Ω–∏—è: `curl` (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è) –∏–ª–∏ `allow_url_fopen`
- –ü—Ä–∞–≤–∞ –Ω–∞ –∑–∞–ø–∏—Å—å –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é —Å–∫—Ä–∏–ø—Ç–∞
- SSL –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –¥–ª—è HTTPS —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π

## üöÄ –£—Å—Ç–∞–Ω–æ–≤–∫–∞

1. **–°–∫–∞—á–∞–π—Ç–µ —Å–∫—Ä–∏–ø—Ç:**
   ```bash
   wget https://raw.githubusercontent.com/commeta/google-fonts-proxy/main/fonts-proxy.php
   ```

2. **–£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞:**
   ```bash
   chmod 755 fonts-proxy.php
   ```

3. **–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ PHP –º–æ–∂–µ—Ç —Å–æ–∑–¥–∞–≤–∞—Ç—å –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏:**
   ```bash
   chown www-data:www-data /path/to/script/directory
   ```

–°–∫—Ä–∏–ø—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞—Å—Ç –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏:
- `cache/css/` - –¥–ª—è –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è CSS —Ñ–∞–π–ª–æ–≤
- `cache/fonts/` - –¥–ª—è –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è —Ñ–∞–π–ª–æ–≤ —à—Ä–∏—Ñ—Ç–æ–≤

## üíª –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –û—Å–Ω–æ–≤–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

–ó–∞–º–µ–Ω–∏—Ç–µ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ —Å—Å—ã–ª–∫–∏ –Ω–∞ Google Fonts:

**–ë—ã–ª–æ:**
```html
<link href="https://fonts.googleapis.com/css?family=Open+Sans:400,600,700&display=swap" rel="stylesheet">
```

**–°—Ç–∞–ª–æ:**
```html
<link href="https://yourdomain.com/fonts-proxy.php?family=Open+Sans:400,600,700&display=swap" rel="stylesheet">
```

### –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã

- api=1 - –¥–ª—è –ø–µ—Ä–≤–æ–π –≤–µ—Ä—Å–∏–∏ https://fonts.googleapis.com/css
- api=2 - –¥–ª—è –≤—Ç–æ—Ä–æ–π –≤–µ—Ä—Å–∏–∏ https://fonts.googleapis.com/css2
- –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞ –ø–µ—Ä–≤–∞—è –≤–µ—Ä—Å–∏—è api


### –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

**V1 API**
```html
<!-- –û–¥–∏–Ω —à—Ä–∏—Ñ—Ç -->
<link href="/fonts-proxy.php?api=1&family=Roboto:400,700" rel="stylesheet">

<!-- –ù–µ—Å–∫–æ–ª—å–∫–æ —à—Ä–∏—Ñ—Ç–æ–≤ -->
<link href="/fonts-proxy.php?api=1&family=Roboto:400,700|Open+Sans:300,400" rel="stylesheet">

<!-- –° –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–º–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏ -->
<link href="/fonts-proxy.php?api=1&family=Roboto:400&display=swap&subset=latin,cyrillic" rel="stylesheet">
```

**V2 API**
```html
<!-- 1) –ë–∞–∑–æ–≤—ã–π v2: –≤–µ—Å —á–µ—Ä–µ–∑ wght@ -->
<link href="/fonts-proxy.php?api=2&family=Roboto:wght@400;700" rel="stylesheet">

<!-- 2) Italic + weight: ital,wght@0,400;1,700 -->
<link href="/fonts-proxy.php?api=2&family=Open+Sans:ital,wght@0,300;0,400;1,400;1,700" rel="stylesheet">

<!-- 3) –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ —à—Ä–∏—Ñ—Ç—ã (variable font) —Å –æ—Å—è–º–∏ -->
<link href="/fonts-proxy.php?api=2&family=Roboto+Flex:opsz,wght@8..144,100..900" rel="stylesheet">

<!-- 4) –° display, —Ç–µ–∫—Å—Ç–æ–≤—ã–º –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ–º –∏ subset -->
<link href="/fonts-proxy.php?api=2&family=Montserrat:wght@400;600&display=swap&text=Hello%20World!&subset=latin-ext" rel="stylesheet">

<!-- 5) –ú—É–ª—å—Ç—è—à—Ä–∏—Ñ—Ç—ã —Å —Ä–∞–∑–Ω—ã–º–∏ —Å–µ–º–µ–π—Å—Ç–≤–∞–º–∏ —á–µ—Ä–µ–∑ v2 -->
<link href="/fonts-proxy.php?api=2&family=Roboto+Slab:wght@300;600&family=Lato:ital,wght@0,400;1,700&display=swap" rel="stylesheet">
```

## üõ†Ô∏è –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–∏–≤–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã

### –û—á–∏—Å—Ç–∫–∞ –∫—ç—à–∞

```bash
curl "https://yourdomain.com/fonts-proxy.php?action=clear_cache"
```

–û—Ç–≤–µ—Ç:
```
Cache cleared. Files removed: 25
```

### –û—Ç–ª–∞–¥–∫–∞ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

```bash
curl "https://yourdomain.com/fonts-proxy.php?action=debug_performance"
```

–ü—Ä–∏–º–µ—Ä –æ—Ç–≤–µ—Ç–∞:
```json
{
    "memory_cache_size": 3,
    "memory_usage": 2097152,
    "memory_peak": 2097152,
    "cache_dir_exists": true,
    "fonts_dir_exists": true,
    "css_cache_files": 1,
    "font_cache_files": 6,
    "cache_normalization": "enabled",
    "user_agent_normalized": "Mozilla/5.0 Modern Browser (woff2 support)",
    "detected_font_format": "woff2",
    "cache_stats": {
        "css_files": 1,
        "font_files": 6,
        "total_size": 264280,
        "cache_efficiency": "improved",
        "api_v2_support": true,
        "total_size_mb": 0.25,
        "cache_hit_ratio": 100
    },
    "curl_multi_support": true,
    "download_method": "curl_multi"
}
```

### –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∫—ç—à–∞

```bash
curl "https://yourdomain.com/fonts-proxy.php?action=cache_stats"
```

–ü—Ä–∏–º–µ—Ä –æ—Ç–≤–µ—Ç–∞:
```json
{
    "css_files": 1,
    "font_files": 63,
    "total_size": 1814126,
    "cache_efficiency": "improved",
    "api_v2_support": true,
    "total_size_mb": 1.73,
    "cache_hit_ratio": 100
}
```

## ‚öôÔ∏è –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### –û—Å–Ω–æ–≤–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

–í—ã –º–æ–∂–µ—Ç–µ –∏–∑–º–µ–Ω–∏—Ç—å —Å–ª–µ–¥—É—é—â–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –≤ —Ñ–∞–π–ª–µ —Å–∫—Ä–∏–ø—Ç–∞:

```php
// –ö–æ–Ω—Å—Ç–∞–Ω—Ç—ã –¥–ª—è –ø—É—Ç–µ–π
const CACHE_CSS_DIR = 'cache/css/';     // –ö–∞—Å—Ç–æ–º–Ω—ã–π –ø—É—Ç—å –¥–ª—è –∫–µ—à–∞ CSS
const CACHE_FONTS_DIR = 'cache/fonts/'; // –ö–∞—Å—Ç–æ–º–Ω—ã–π –ø—É—Ç—å –¥–ª—è –∫–µ—à–∞ —à—Ä–∏—Ñ—Ç–æ–≤
const FONTS_WEB_PATH = '/cache/fonts/'; // URL-–ø—É—Ç—å –¥–ª—è –ø–æ–¥—Å—Ç–∞–Ω–æ–≤–∫–∏ –≤ CSS
const ADMIN_ACTIONS = false;            // –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–∏–≤–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã
const MAX_PARALLEL = 32;                // –ú–∞–∫—Å–∏–º—É–º –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π

```

–í—ã –º–æ–∂–µ—Ç–µ –∏–∑–º–µ–Ω–∏—Ç—å —Å–ª–µ–¥—É—é—â–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –≤ –∫–ª–∞—Å—Å–µ `GoogleFontsProxy`:

```php
private $maxCacheAge = 86400 * 365;   // –í—Ä–µ–º—è –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è (1 –≥–æ–¥)
private $maxExecutionTime = 30;       // –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –≤—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è
const TEMP_FILE_PREFIX = '.tmp_';     // –ü—Ä–µ—Ñ–∏–∫—Å –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤
const LOCK_FILE_PREFIX = '.lock_';    // –ü—Ä–µ—Ñ–∏–∫—Å —Ñ–∞–π–ª–æ–≤-–±–ª–æ–∫–∏—Ä–æ–≤–æ–∫
```

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –≤–µ–±-—Å–µ—Ä–≤–µ—Ä–∞

#### Apache (.htaccess)
```apache
<Files "fonts-proxy.php">
    # –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è –±—Ä–∞—É–∑–µ—Ä–æ–≤
    <IfModule mod_expires.c>
        ExpiresActive on
        ExpiresByType text/css "access plus 1 year"
    </IfModule>
    
    # –°–∂–∞—Ç–∏–µ
    <IfModule mod_deflate.c>
        SetOutputFilter DEFLATE
    </IfModule>
    
    # ETag –ø–æ–¥–¥–µ—Ä–∂–∫–∞
    <IfModule mod_headers.c>
        Header append Vary User-Agent
        Header append Vary Accept-Language
    </IfModule>
</Files>
```

#### Nginx
```nginx
location ~ ^/fonts-proxy\.php$ {
    fastcgi_pass unix:/var/run/php/php8.1-fpm.sock;
    fastcgi_index index.php;
    include fastcgi_params;
    fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;
    
    # –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ
    expires 1y;
    add_header Cache-Control "public, max-age=31536000";
    add_header Vary "User-Agent, Accept-Language";
}
```

## üéØ –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

### –ö–ª—é—á–µ–≤—ã–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏

- **–ö—ç—à –≤ –ø–∞–º—è—Ç–∏** - –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç –ø–æ–≤—Ç–æ—Ä–Ω—ã–µ —Ñ–∞–π–ª–æ–≤—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –≤ –æ–¥–Ω–æ–º –∑–∞–ø—Ä–æ—Å–µ
- **–ë—ã—Å—Ç—Ä–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –∫—ç—à–∞** - –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö —Ñ–∞–π–ª–æ–≤ —á–µ—Ä–µ–∑ `stat()`
- **–ù–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è User-Agent** - —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ–µ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –∏ —Å—Ç–∞—Ä—ã—Ö –±—Ä–∞—É–∑–µ—Ä–æ–≤
- **–ü–∞–∫–µ—Ç–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ —Ñ–∞–π–ª–æ–≤** - –µ–¥–∏–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏—è —à—Ä–∏—Ñ—Ç–æ–≤
- **–û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Ä–µ–≥—É–ª—è—Ä–Ω—ã–µ –≤—ã—Ä–∞–∂–µ–Ω–∏—è** - –∫–æ–º–ø–∏–ª—è—Ü–∏—è –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤ –æ–¥–∏–Ω —Ä–∞–∑
- **ETag –ø–æ–¥–¥–µ—Ä–∂–∫–∞** - –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏–µ –ø–æ–≤—Ç–æ—Ä–Ω–æ–π –ø–µ—Ä–µ–¥–∞—á–∏ –Ω–µ–∏–∑–º–µ–Ω–µ–Ω–Ω–æ–≥–æ –∫–æ–Ω—Ç–µ–Ω—Ç–∞
- **–£–º–Ω–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ñ–æ—Ä–º–∞—Ç–∞** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –≤—ã–±–æ—Ä WOFF2/WOFF

### –ê–ª–≥–æ—Ä–∏—Ç–º –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏–∏ User-Agent

–°–∫—Ä–∏–ø—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω—É—é –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—é User-Agent –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è:

- **–°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–µ –±—Ä–∞—É–∑–µ—Ä—ã** (Chrome, Firefox, Safari, Edge, Opera) ‚Üí –µ–¥–∏–Ω—ã–π –Ω–æ—Ä–º–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–π UA –¥–ª—è WOFF2
- **–°—Ç–∞—Ä—ã–µ –±—Ä–∞—É–∑–µ—Ä—ã** (IE, —Å—Ç–∞—Ä—ã–µ –≤–µ—Ä—Å–∏–∏) ‚Üí –æ—Ç–¥–µ–ª—å–Ω—ã–π UA –¥–ª—è WOFF
- **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –≤–µ—Ä—Å–∏–π** - –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∏ WOFF2 –ø–æ –≤–µ—Ä—Å–∏–∏ –±—Ä–∞—É–∑–µ—Ä–∞

### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

```bash
# –¢–µ—Å—Ç —Ö–æ–ª–æ–¥–Ω–æ–≥–æ –∫—ç—à–∞
time curl -s "https://yourdomain.com/fonts-proxy.php?family=Roboto:400,700" > /dev/null

# –¢–µ—Å—Ç –≥–æ—Ä—è—á–µ–≥–æ –∫—ç—à–∞  
time curl -s "https://yourdomain.com/fonts-proxy.php?family=Roboto:400,700" > /dev/null

# –¢–µ—Å—Ç ETag (–¥–æ–ª–∂–µ–Ω –≤–µ—Ä–Ω—É—Ç—å 304)
curl -H 'If-None-Match: "–≤–∞—à_etag"' -v "https://yourdomain.com/fonts-proxy.php?family=Roboto:400,700"
```

### –í—Ä–µ–º—è –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è

- **CSS –∏ —à—Ä–∏—Ñ—Ç—ã**: 1 –≥–æ–¥ (365 –¥–Ω–µ–π)
- **–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–∏–≤–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã**: –±–µ–∑ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è
- **–ë—Ä–∞—É–∑–µ—Ä–Ω—ã–π –∫—ç—à**: 1 –≥–æ–¥ —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π ETag

## üîß –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –Ω–µ–ø–æ–ª–∞–¥–æ–∫

### –ü—Ä–æ–±–ª–µ–º—ã —Å –ø—Ä–∞–≤–∞–º–∏ –¥–æ—Å—Ç—É–ø–∞

```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø—Ä–∞–≤–∞ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏
ls -la /path/to/script/

# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –ø—Ä–∞–≤–∞
chown -R www-data:www-data cache/
chmod -R 755 cache/
```

### –ü—Ä–æ–±–ª–µ–º—ã —Å SSL

–ï—Å–ª–∏ –≤–æ–∑–Ω–∏–∫–∞—é—Ç –æ—à–∏–±–∫–∏ SSL, –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞–ª–∏—á–∏–µ –∫–æ—Ä–Ω–µ–≤—ã—Ö —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤:
```bash
php -r "var_dump(openssl_get_cert_locations());"
```

### –û—Ç–ª–∞–¥–∫–∞

–í–∫–ª—é—á–∏—Ç–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—à–∏–±–æ–∫ PHP:
```php
ini_set('log_errors', 1);
ini_set('error_log', '/path/to/error.log');
```

### –ß–∞—Å—Ç—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

| –ü—Ä–æ–±–ª–µ–º–∞ | –†–µ—à–µ–Ω–∏–µ |
|----------|---------|
| "–ù–µ —É–¥–∞–ª–æ—Å—å —Å–æ–∑–¥–∞—Ç—å –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é" | –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞ –∫ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ —Å–∫—Ä–∏–ø—Ç–∞ |
| "cURL error" | –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ php-curl |
| "SSL certificate problem" | –û–±–Ω–æ–≤–∏—Ç–µ –∫–æ—Ä–Ω–µ–≤—ã–µ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã |
| –ú–µ–¥–ª–µ–Ω–Ω–∞—è —Ä–∞–±–æ—Ç–∞ | –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è –∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –¥–∏—Å–∫–∞ |
| 304 –æ—à–∏–±–∫–∏ | –ù–æ—Ä–º–∞–ª—å–Ω–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ - –±—Ä–∞—É–∑–µ—Ä –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –∫—ç—à |

## üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

### –õ–æ–≥–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

–°–∫—Ä–∏–ø—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ª–æ–≥–∏—Ä—É–µ—Ç –æ—à–∏–±–∫–∏. –î–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ:

```bash
# –ü—Ä–æ—Å–º–æ—Ç—Ä –æ—à–∏–±–æ–∫
tail -f /var/log/apache2/error.log | grep "Google Fonts Proxy"

# –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∫—ç—à–∞
curl -s "https://yourdomain.com/fonts-proxy.php?action=cache_stats" | jq '.'

# –†–∞–∑–º–µ—Ä –∫—ç—à–∞
du -sh cache/

# –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ñ–∞–π–ª–æ–≤
find cache/ -type f | wc -l
```

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ—á–∏—Å—Ç–∫–∞ –∫—ç—à–∞ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

–î–æ–±–∞–≤—å—Ç–µ –≤ crontab –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –æ—á–∏—Å—Ç–∫–∏ —É—Å—Ç–∞—Ä–µ–≤—à–∏—Ö —Ñ–∞–π–ª–æ–≤:

```bash
# –û—á–∏—Å—Ç–∫–∞ –∫—ç—à–∞ –∫–∞–∂–¥—É—é –Ω–µ–¥–µ–ª—é
0 3 * * 0 /usr/bin/curl -s "https://yourdomain.com/fonts-proxy.php?action=clear_cache" > /dev/null
```

## üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –º–µ—Ä—ã –∑–∞—â–∏—Ç—ã

- ‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è –≤—Å–µ—Ö –≤—Ö–æ–¥—è—â–∏—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
- ‚úÖ –°–∞–Ω–∏—Ç–∏–∑–∞—Ü–∏—è –∏–º–µ–Ω —Ñ–∞–π–ª–æ–≤ –∏ URL
- ‚úÖ –ó–∞—â–∏—Ç–∞ –æ—Ç path traversal –∞—Ç–∞–∫
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤
- ‚úÖ –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ —Ä–∞–∑–º–µ—Ä–∞ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ (500 —Å–∏–º–≤–æ–ª–æ–≤)
- ‚úÖ –ë–µ–∑–æ–ø–∞—Å–Ω–∞—è —Ä–∞–±–æ—Ç–∞ —Å –≤—Ä–µ–º–µ–Ω–Ω—ã–º–∏ —Ñ–∞–π–ª–∞–º–∏
- ‚úÖ –ó–∞—â–∏—Ç–∞ –æ—Ç –∏–Ω—ä–µ–∫—Ü–∏–π –≤ —Ä–µ–≥—É–ª—è—Ä–Ω—ã—Ö –≤—ã—Ä–∞–∂–µ–Ω–∏—è—Ö
- ‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –ª–æ–∫–∞–ª—å–Ω—ã—Ö URL
- ‚úÖ Race Condition –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ —Ñ–∞–π–ª–æ–≤ –∫—ç—à–∞


### –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

```apache
# –ó–∞—â–∏—Ç–∞ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–∏–≤–Ω—ã—Ö –∫–æ–º–∞–Ω–¥ (Apache)
<FilesMatch "fonts-proxy\.php">
    <RequireAll>
        Require local
        # –∏–ª–∏ Require ip 192.168.1.0/24
    </RequireAll>
    SetEnvIf Query_String "action=" admin_access
    <RequireAll>
        Require env admin_access
        Require local
    </RequireAll>
</FilesMatch>
```


## –ü—Ä–∏–Ω—Ü–∏–ø —Ä–∞–±–æ—Ç—ã Google Fonts Proxy:

1. **–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è** - –°–æ–∑–¥–∞–Ω–∏–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã—Ö –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–π –∏ –ø—Ä–æ–≤–µ—Ä–∫–∞ –æ–∫—Ä—É–∂–µ–Ω–∏—è
2. **–û–±—Ä–∞–±–æ—Ç–∫–∞ –∑–∞–ø—Ä–æ—Å–∞** - –í–∞–ª–∏–¥–∞—Ü–∏—è –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –∏ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –≤–µ—Ä—Å–∏–∏ Google Fonts API
3. **–ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ CSS** - –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ –∫—ç—à–∞ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –±–ª–æ–∫–∏—Ä–æ–≤–æ–∫ –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
4. **–ü–æ–ª—É—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö** - –ó–∞–ø—Ä–æ—Å –∫ Google Fonts API —á–µ—Ä–µ–∑ cURL Multi –∏–ª–∏ file_get_contents
5. **–û–±—Ä–∞–±–æ—Ç–∫–∞ —à—Ä–∏—Ñ—Ç–æ–≤** - –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ URL —à—Ä–∏—Ñ—Ç–æ–≤, –∏—Ö –∑–∞–≥—Ä—É–∑–∫–∞ –∏ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ
6. **–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è** - –ó–∞–º–µ–Ω–∞ –≤–Ω–µ—à–Ω–∏—Ö URL –Ω–∞ –ª–æ–∫–∞–ª—å–Ω—ã–µ –ø—É—Ç–∏ –≤ CSS
7. **–í—ã–≤–æ–¥ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞** - –û—Ç–ø—Ä–∞–≤–∫–∞ –≥–æ—Ç–æ–≤–æ–≥–æ CSS —Å —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–º–∏ HTTP –∑–∞–≥–æ–ª–æ–≤–∫–∞–º–∏

## –ö–ª—é—á–µ–≤—ã–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:

- **–ê—Ç–æ–º–∞—Ä–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏** - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤ –∏ –±–ª–æ–∫–∏—Ä–æ–≤–æ–∫ –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ–≥–æ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è
- **–û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ñ–æ—Ä–º–∞—Ç–∞ —à—Ä–∏—Ñ—Ç–æ–≤** - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –≤—ã–±–æ—Ä WOFF2 –¥–ª—è —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –±—Ä–∞—É–∑–µ—Ä–æ–≤ –∏–ª–∏ WOFF –¥–ª—è —Å—Ç–∞—Ä—ã—Ö
- **–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫** - Fallback –Ω–∞ —Å–∏—Å—Ç–µ–º–Ω—ã–µ —à—Ä–∏—Ñ—Ç—ã –ø—Ä–∏ –ø—Ä–æ–±–ª–µ–º–∞—Ö —Å –∑–∞–≥—Ä—É–∑–∫–æ–π
- **–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–∏–≤–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏** - –û—á–∏—Å—Ç–∫–∞ –∫—ç—à–∞, –æ—Ç–ª–∞–¥–∫–∞ –∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
- **–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏** - –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ –ø–∞–º—è—Ç–∏ –∏ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ —Ñ–∞–π–ª–æ–≤

–°–∫—Ä–∏–ø—Ç –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –ª–æ–∫–∞–ª—å–Ω–æ–µ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ Google Fonts –¥–ª—è —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—è GDPR –∏ —É–ª—É—á—à–µ–Ω–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ —Å–∞–π—Ç–∞.

```mermaid
graph TB
    Start([–ó–∞–ø—Ä–æ—Å –∫ fonts-proxy.php]) --> CheckAction{–ï—Å—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä action?}
    
    %% –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–∏–≤–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è
    CheckAction -->|–î–∞| AdminActions[–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–∏–≤–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è]
    AdminActions --> ClearCache[clear_cache: –û—á–∏—Å—Ç–∫–∞ –∫—ç—à–∞]
    AdminActions --> DebugPerf[debug_performance: –û—Ç–ª–∞–¥–∫–∞]
    AdminActions --> CacheStats[cache_stats: –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞]
    ClearCache --> EndAdmin[–í–æ–∑–≤—Ä–∞—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞]
    DebugPerf --> EndAdmin
    CacheStats --> EndAdmin
    
    %% –û—Å–Ω–æ–≤–Ω–æ–π –ø–æ—Ç–æ–∫
    CheckAction -->|–ù–µ—Ç| Init[–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è GoogleFontsProxy]
    Init --> CreateDirs[–°–æ–∑–¥–∞–Ω–∏–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–π cache/css/ –∏ cache/fonts/]
    CreateDirs --> ValidateParams[–í–∞–ª–∏–¥–∞—Ü–∏—è –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ GET]
    ValidateParams --> BuildURL[–ü–æ—Å—Ç—Ä–æ–µ–Ω–∏–µ URL –¥–ª—è Google Fonts API]
    
    %% –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –≤–µ—Ä—Å–∏–∏ API
    BuildURL --> DetectAPI{–û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –≤–µ—Ä—Å–∏–∏ API}
    DetectAPI -->|v1| APIV1[fonts.googleapis.com/css]
    DetectAPI -->|v2| APIV2[fonts.googleapis.com/css2]
    
    APIV1 --> GenerateKey[–ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∫–ª—é—á–∞ –∫—ç—à–∞]
    APIV2 --> GenerateKey
    
    %% –û–±—Ä–∞–±–æ—Ç–∫–∞ –∫—ç—à–∞ CSS
    GenerateKey --> CheckCSSCache{CSS –≤ –∫—ç—à–µ –∏ –≤–∞–ª–∏–¥–µ–Ω?}
    CheckCSSCache -->|–î–∞| OutputCached[–í—ã–≤–æ–¥ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ CSS]
    CheckCSSCache -->|–ù–µ—Ç| AcquireLock[–ü–æ–ª—É—á–µ–Ω–∏–µ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ –¥–ª—è CSS]
    
    AcquireLock --> LockSuccess{–ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –ø–æ–ª—É—á–µ–Ω–∞?}
    LockSuccess -->|–ù–µ—Ç| CheckCacheAgain[–ü–æ–≤—Ç–æ—Ä–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –∫—ç—à–∞]
    CheckCacheAgain --> OutputCached
    
    LockSuccess -->|–î–∞| DoubleCheck[–î–≤–æ–π–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –∫—ç—à–∞]
    DoubleCheck -->|–ö—ç—à –Ω–∞–π–¥–µ–Ω| OutputCached
    DoubleCheck -->|–ö—ç—à –Ω–µ –Ω–∞–π–¥–µ–Ω| FetchCSS[–ó–∞–ø—Ä–æ—Å CSS –æ—Ç Google]
    
    %% –ü–æ–ª—É—á–µ–Ω–∏–µ CSS –æ—Ç Google
    FetchCSS --> UseCurl{cURL –¥–æ—Å—Ç—É–ø–µ–Ω?}
    UseCurl -->|–î–∞| CurlRequest[HTTP –∑–∞–ø—Ä–æ—Å —á–µ—Ä–µ–∑ cURL]
    UseCurl -->|–ù–µ—Ç| FileGetContents[HTTP –∑–∞–ø—Ä–æ—Å —á–µ—Ä–µ–∑ file_get_contents]
    
    CurlRequest --> ProcessCSS[–û–±—Ä–∞–±–æ—Ç–∫–∞ –ø–æ–ª—É—á–µ–Ω–Ω–æ–≥–æ CSS]
    FileGetContents --> ProcessCSS
    
    %% –û–±—Ä–∞–±–æ—Ç–∫–∞ —à—Ä–∏—Ñ—Ç–æ–≤
    ProcessCSS --> ExtractFontURLs[–ò–∑–≤–ª–µ—á–µ–Ω–∏–µ URL —à—Ä–∏—Ñ—Ç–æ–≤ –∏–∑ CSS]
    ExtractFontURLs --> CheckFonts{–®—Ä–∏—Ñ—Ç—ã –Ω–∞–π–¥–µ–Ω—ã?}
    CheckFonts -->|–ù–µ—Ç| SaveCSS[–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ CSS –≤ –∫—ç—à]
    CheckFonts -->|–î–∞| ProcessFonts[–û–±—Ä–∞–±–æ—Ç–∫–∞ –∫–∞–∂–¥–æ–≥–æ —à—Ä–∏—Ñ—Ç–∞]
    
    ProcessFonts --> FontLoop[–¶–∏–∫–ª –ø–æ —à—Ä–∏—Ñ—Ç–∞–º]
    FontLoop --> CheckFontCache{–®—Ä–∏—Ñ—Ç –≤ –∫—ç—à–µ?}
    CheckFontCache -->|–î–∞| NextFont[–°–ª–µ–¥—É—é—â–∏–π —à—Ä–∏—Ñ—Ç]
    CheckFontCache -->|–ù–µ—Ç| FontLock[–ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –¥–ª—è —à—Ä–∏—Ñ—Ç–∞]
    
    FontLock --> DownloadFont[–°–∫–∞—á–∏–≤–∞–Ω–∏–µ —à—Ä–∏—Ñ—Ç–∞]
    DownloadFont --> FontFormat{–§–æ—Ä–º–∞—Ç —à—Ä–∏—Ñ—Ç–∞}
    FontFormat --> WOFF2[WOFF2 –¥–ª—è —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –±—Ä–∞—É–∑–µ—Ä–æ–≤]
    FontFormat --> WOFF[WOFF –¥–ª—è —Å—Ç–∞—Ä—ã—Ö –±—Ä–∞—É–∑–µ—Ä–æ–≤]
    
    WOFF2 --> SaveFont[–ê—Ç–æ–º–∞—Ä–Ω–æ–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —à—Ä–∏—Ñ—Ç–∞]
    WOFF --> SaveFont
    SaveFont --> NextFont
    
    NextFont --> AllFontsProcessed{–í—Å–µ —à—Ä–∏—Ñ—Ç—ã –æ–±—Ä–∞–±–æ—Ç–∞–Ω—ã?}
    AllFontsProcessed -->|–ù–µ—Ç| FontLoop
    AllFontsProcessed -->|–î–∞| ReplaceURLs[–ó–∞–º–µ–Ω–∞ URL –≤ CSS –Ω–∞ –ª–æ–∫–∞–ª—å–Ω—ã–µ]
    
    ReplaceURLs --> AddMetadata[–î–æ–±–∞–≤–ª–µ–Ω–∏–µ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö –≤ CSS]
    AddMetadata --> SaveCSS
    SaveCSS --> ReleaseLock[–û—Å–≤–æ–±–æ–∂–¥–µ–Ω–∏–µ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏]
    ReleaseLock --> OutputCSS[–í—ã–≤–æ–¥ CSS —Å –∑–∞–≥–æ–ª–æ–≤–∫–∞–º–∏]
    
    OutputCached --> End([–ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ])
    OutputCSS --> End
    EndAdmin --> End
    
    %% –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
    ProcessCSS -.->|–û—à–∏–±–∫–∞| HandleError[–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–∫–∏]
    DownloadFont -.->|–û—à–∏–±–∫–∞| HandleError
    HandleError --> FallbackCSS[–ì–µ–Ω–µ—Ä–∞—Ü–∏—è Fallback CSS]
    FallbackCSS --> End
    
    %% –°—Ç–∏–ª–∏ –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —Ç–∏–ø–æ–≤ —É–∑–ª–æ–≤
    classDef startEnd fill:#e1f5fe,stroke:#01579b,stroke-width:2px
    classDef process fill:#f3e5f5,stroke:#4a148c,stroke-width:2px
    classDef decision fill:#fff3e0,stroke:#e65100,stroke-width:2px
    classDef cache fill:#e8f5e8,stroke:#2e7d32,stroke-width:2px
    classDef api fill:#fce4ec,stroke:#c2185b,stroke-width:2px
    classDef error fill:#ffebee,stroke:#d32f2f,stroke-width:2px
    
    class Start,End startEnd
    class Init,CreateDirs,ValidateParams,ProcessCSS,ExtractFontURLs,ProcessFonts,ReplaceURLs,AddMetadata,SaveCSS,OutputCSS process
    class CheckAction,DetectAPI,CheckCSSCache,LockSuccess,UseCurl,CheckFonts,CheckFontCache,FontFormat,AllFontsProcessed decision
    class OutputCached,SaveFont,GenerateKey cache
    class APIV1,APIV2,BuildURL,FetchCSS,CurlRequest,FileGetContents api
    class HandleError,FallbackCSS error
```

## üìù –õ–∏—Ü–µ–Ω–∑–∏—è

–≠—Ç–æ—Ç –ø—Ä–æ–µ–∫—Ç —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω—è–µ—Ç—Å—è –ø–æ–¥ –ª–∏—Ü–µ–Ω–∑–∏–µ–π MIT. –°–º. —Ñ–∞–π–ª [LICENSE](LICENSE) –¥–ª—è –ø–æ–¥—Ä–æ–±–Ω–æ—Å—Ç–µ–π.

## üôè –ë–ª–∞–≥–æ–¥–∞—Ä–Ω–æ—Å—Ç–∏

- Google Fonts –∑–∞ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–∏–µ –æ—Ç–ª–∏—á–Ω—ã—Ö —à—Ä–∏—Ñ—Ç–æ–≤
